import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { useState } from 'react';
import Modal from '.';
import Button from '../Button/Button';
import ThemeProvider from '../ThemeProvider/ThemeProvider';

<Meta title="Data Display/Modal" component={Modal}/>

# Modal

A Modal is a container that can be used to display content in a modal window.

export const ToggleButton = ({children}) => {
  const [isOpen, setIsOpen] = useState(false);
  const toggleModal = () => setIsOpen(!isOpen);
  const onClose = () => setIsOpen(false);
  return (
    <ThemeProvider>
      <Button onClick={toggleModal}>Toggle Modal</Button>
      {children(isOpen, onClose)}
    </ThemeProvider>
  );
};

__in this sample we replace some css variables to handle preview__
<Canvas>
     <ToggleButton>
      {(isOpen, onClose) => (
        <Modal isOpen={isOpen} onClose={onClose}>
          <Modal.Header>Title</Modal.Header>
          <Modal.Content>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nonne merninisti licere mihi ista probare, quae sunt a te dicta? Refert tamen, quo modo.</p>
          </Modal.Content>
          <Modal.Footer>
            <Button intent="danger" onClick={onClose}>Cancel</Button>
            <Button onClick={onClose}>Save</Button>
          </Modal.Footer>
        </Modal>
      )}
    </ToggleButton>
</Canvas>

## `<Modal/>` Properties
- Extends HTMLElement properties**
- **refs are fowarded to the modal element**

|Property|Type|Default Value|Description|Required|
|---|---|---|---|---|
|size|`normal`, `medium`, `fullscreen`|`normal`|Size of the modal|No|
|onClose|`function(reason: 'close' \| 'escape' \| 'backdrop')`|`undefined`|Callback when the backdrop is clicked|No|
|backdropProps|HTMLElementProps|`undefined`|Properties to pass to the backdrop|No|
|hideBackdrop|`boolean`|`false`|Hide the backdrop|No|
|isOpen|`boolean`|`false`|Show the modal|No|
|portalTarget|`HTMLElement`|`document.body`|The element to render the modal in|No|
|testingID| string | - | The id used for testing purposes.<br/>`<div data-testid="my-test-id"/>` |No|

### CSS Variables

|Variable|Description|Default Value|
|---|---|---|
|--lens-ui-modal-backgrop-position|Position of the backdrop|fixed|
|--lens-ui-modal-backgrop-width|Width of the backdrop|100vw|
|--lens-ui-modal-backgrop-height|Height of the backdrop|100vh|

## `<Modal.Header/>` Properties
- **Extends HTMLElement properties**
- **refs are fowarded to the content element**

|Property|Type|Default Value|Description|Required|
|---|---|---|---|---|
|onClose|`function(reason: 'x-close-header')`|`undefined`|Callback when the close button is clicked|No|
|testingID| string | - | The id used for testing purposes.<br/>`<div data-testid="my-test-id"/>` |No|


## `<Modal.Content/>` Properties
- **Extends HTMLElement properties**
- **refs are fowarded to the content element**

|Property|Type|Default Value|Description|Required|
|---|---|---|---|---|
|testingID| string | - | The id used for testing purposes.<br/>`<div data-testid="my-test-id"/>` |No|

## `<Modal.Footer/>` Properties
- **Extends HTMLElement properties**
- **refs are fowarded to the content element**

|Property|Type|Default Value|Description|Required|
|---|---|---|---|---|
|testingID| string | - | The id used for testing purposes.<br/>`<div data-testid="my-test-id"/>` |No|

---

### Hidden backdrop

<Canvas>
  <ToggleButton>
    {(isOpen, onClose) => (
      <Modal hideBackdrop isOpen={isOpen} onClose={onClose}>
        <Modal.Header>Title</Modal.Header>
        <Modal.Content>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nonne merninisti licere mihi ista probare, quae sunt a te dicta? Refert tamen, quo modo.</p>
        </Modal.Content>
        <Modal.Footer>
          <Button intent="danger" onClick={onClose}>Cancel</Button>
          <Button onClick={onClose}>Save</Button>
        </Modal.Footer>
      </Modal>
    )}
  </ToggleButton>
</Canvas>


### Dark theme

<Canvas className="dark">
    <ToggleButton>
      {(isOpen, onClose) => (
        <ThemeProvider theme="dark">
          <Modal isOpen={isOpen} onClose={onClose}>
            <Modal.Header>Title</Modal.Header>
            <Modal.Content>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nonne merninisti licere mihi ista probare, quae sunt a te dicta? Refert tamen, quo modo.</p>
            </Modal.Content>
            <Modal.Footer>
              <Button intent="danger" onClick={onClose}>Cancel</Button>
              <Button onClick={onClose}>Save</Button>
            </Modal.Footer>
          </Modal>
        </ThemeProvider>
      )}
    </ToggleButton>
</Canvas>
